[href] {
  background-image: var(--underline-img), var(--underline-img);
  background-position: var(--underline-x) 100%, var(--underline-x) calc(100% - var(--underline-thickness));
  background-repeat: no-repeat, no-repeat;
  transition: background-size 0s;
  background-size: var(--underline-hover-width) calc(var(--underline-thickness) * 2), var(--underline-idle-width) var(--underline-thickness);
}

a[href]:hover,
a[href]:active {
  --underline-hover-width: var(--underline-max-width);
}

a {
  text-decoration: none;
  color: inherit;
  --hover-tint: var(--idle);
  --active-tint: var(--active);
}

@media (hover: hover) and (pointer: fine) {
  a[href]:hover,
  button:not(:disabled):hover,
  input[type=button]:not(:disabled):hover,
  input[type=image]:not(:disabled):hover,
  input[type=reset]:not(:disabled):hover,
  input[type=submit]:not(:disabled):hover {
    background-color: var(--hover-tint);
  }

  a[href]:active,
  button:not(:disabled):active,
  input[type=button]:not(:disabled):active,
  input[type=image]:not(:disabled):active,
  input[type=reset]:not(:disabled):active,
  input[type=submit]:not(:disabled):active {
    background-color: var(--active-tint);
  }

  a[href]:hover,
  a[href]:active {
    --underline-hover-width: var(--underline-max-width);
  }
}
